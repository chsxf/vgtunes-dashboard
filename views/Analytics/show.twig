{% extends 'root.twig' %}

{% block page_title 'Analytics' %}

{% block page_content %}
	{{ parent() }}

	{% if analytics is defined %}
		{{ include('timeFrameSelector.twig', { action: '/Analytics/show', validator: analytics.validator }, with_context: false) }}

		<div class="spinner-border mt-3" role="status" id="graph-spinner">
			<span class="visually-hidden">Loading...</span>
		</div>

		<div class="mt-3" id="graph" style="height: 400px"></div>

		<script type="text/javascript">{{ include('graph.js', { graph_element_id: 'graph' }) }}</script>

		<hr class="mt-4"/>
		<h2>Most Viewed Pages</h2>
		<table class="table table-striped table-hover">
			<thead>
				<th scope="col">&nbsp;</th>
				<th scope="col">Title / Path</th>
				<th scope="col">Hits</th>
				<th scope="col">&nbsp;</th>
			</thead>
			<tbody id="most-viewed-pages-tbody">
				<tr>
					<td colspan="4" class="text-secondary">Loading data...</td>
				</tr>
			</tbody>
		</tds</tr>
	</tbody>
</table>

<script type="text/javascript">{{ include('Analytics/mostViewedPages.js') }}</script>{% else %}
<p class="text-secondary">Analytics is disabled</p>{% endif %}{% endblock %}
